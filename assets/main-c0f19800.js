const l={log:(...t)=>console.log("[WA]",...t),err:(...t)=>console.error("[WA]",...t)},y="/@/ynov-1733302243/ynov_adventure/new-map",p=[{id:"#TPA-IA",label:"IA"},{id:"#TPAINFO",label:"Informatique"},{id:"#TPACYBER",label:"Cybersécurité"},{id:"#TPAARCHI",label:"Architecture"},{id:"#TPABIM",label:"Bâtiment Numérique"},{id:"#TPAAUDIO",label:"Audiovisuel"},{id:"#TPADIGITAL",label:"DIGITAL IA"},{id:"#TPA3D",label:"3D"},{id:"#TPAHUB",label:"Accueil"}],A=3;function h(t,o,e,n=!0){var a,u;const r=(a=WA.ui)==null?void 0:a.actionBar;if(!(r!=null&&r.addButton))return l.err("actionBar indisponible"),!1;try{(u=r.removeButton)==null||u.call(r,t)}catch{}try{const c={id:t,label:o,callback:e,clickCallback:e};return n&&(c.bgColor="#2ea7ff",c.isGradient=!0),r.addButton(c),!0}catch{try{return r.addButton({id:t,label:o,callback:e,clickCallback:e}),!0}catch(d){return l.err("addButton error:",d),!1}}}function v(t){var o,e,n;try{(n=(e=(o=WA.ui)==null?void 0:o.actionBar)==null?void 0:e.removeButton)==null||n.call(e,t)}catch{}}const B="teleport-btn";let f=!1,i=0,m=[];WA.onInit().then(()=>{var n,r;let t=0;const o=20,e=()=>{if(t++,h(B,"Téléportation",T,!0)){l.log("Bouton Téléportation OK");return}t<o?setTimeout(e,200):l.err("Impossible d’ajouter le bouton Téléportation (action bar).")};e();try{(r=(n=WA.ui).registerMenuCommand)==null||r.call(n,"Téléportation",T),p.forEach(a=>{var u,c;return(c=(u=WA.ui).registerMenuCommand)==null?void 0:c.call(u,a.label,()=>{try{WA.nav.goToRoom(y+a.id)}catch(d){l.err("goToRoom error:",d)}})})}catch{l.log("registerMenuCommand non disponible — pas bloquant.")}setTimeout(()=>{g()},5e3)}).catch(t=>l.err("onInit error:",t));function T(){f||(f=!0,v(B),i=0,b())}function I(){P(),f=!1,h(B,"Téléportation",T,!0)}function b(){P();const t=Math.max(1,Math.ceil(p.length/A));i=Math.max(0,Math.min(i,t-1));const o=i*A,e=p.slice(o,o+A);i>0&&s("tp-prev","◀",()=>{i--,b()}),e.forEach((n,r)=>s(`tp-${o+r}`,n.label,()=>{try{WA.nav.goToRoom(y+n.id)}catch(a){l.err("goToRoom error:",a)}I()})),i<t-1&&s("tp-next","▶",()=>{i++,b()}),s("tp-close","✖",I)}function s(t,o,e){h(t,o,e,!1)&&m.push(t)}function P(){m.forEach(t=>v(t)),m=[]}function g(){if(WA.player.state.hasVariable("ynov_adventure_form_done")){l.log("Form already done");return}WA.player.state.saveVariable("ynov_adventure_form_done",!1),WA.controls.disablePlayerControls(),WA.ui.modal.openModal({title:"Formulaire de présentation",allowApi:!0,position:"center",allow:null,src:"https://blocksurvey.io/xT1hdkDrQ7WQWPssxz04kA?v=o",allowFullScreen:!0,closable:!1})}
//# sourceMappingURL=main-c0f19800.js.map
